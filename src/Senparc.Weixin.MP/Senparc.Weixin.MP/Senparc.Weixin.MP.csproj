<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFrameworks>netstandard1.6;net45</TargetFrameworks>
    <Version>14.4.6</Version>
    <AssemblyName>Senparc.Weixin.MP</AssemblyName>
    <RootNamespace>Senparc.Weixin.MP</RootNamespace>
    <GeneratePackageOnBuild>True</GeneratePackageOnBuild>

    <Description>
      微信公众账号 - 微信公众号 模块

      Senparc.Weixin SDK 开源项目：
      https://github.com/JeffreySu/WeiXinMPSDK
    </Description>
    <Copyright>Senparc Copyright © 2004~2017</Copyright>
    <PackageTags>微信,weixin,公众号,Senparc,盛派,SDK,C#,JSSDK,微信支付,分布式,小程序,JSSDK,微信支付,摇一摇周边</PackageTags>


    <Authors>Jeffrey Su</Authors>
    <Owners>Senparc</Owners>
    <PackageLicenseUrl>https://github.com/JeffreySu/WeiXinMPSDK/blob/master/license.md</PackageLicenseUrl>
    <ProjectUrl>https://github.com/JeffreySu/WeiXinMPSDK</ProjectUrl>
    <Title>Senparc.Weixin.MP.dll</Title>

    <Summary>微信公众号SDK for C#</Summary>
    <PackageProjectUrl>https://github.com/JeffreySu/WeiXinMPSDK</PackageProjectUrl>
    <PackageIconUrl>http://sdk.weixin.senparc.com/Images/Logo.jpg</PackageIconUrl>
    <PackageReleaseNotes>
      v4.9
      丰富了JSON通讯的消息返回类型

      修复MessageAgent状态记录的一个bug

      修复二维码事件bug

      24小时推送限制改为48小时

      v4.10
      添加媒体文件上传、下载接口

      v4.11
      添加AccessTokenContainer管理容器

      v.4.12
      添加更多AccessTokenContainer下的方法

      v4.13.0 添加高级接口中的语种选择

      v5.0.0 添加图片、语音、视频返回类型

      v5.1 优化图片等消息的响应，并添加图片等新回复格式的DEMO

      v5.2 添加MessageAgent.CheckUrlAndToken方法

      v5.4.0 souidea全面升级到weiweihi

      v5.5.0 添加View事件响应；添加单个列队自定义过期时间

      v5.6.0 添加OnTextOrEventRequest事件

      v5.7.0 添加百度地图帮助类

      v5.8.0 添加模板消息接口、群发接口

      v5.9.0 添加多客服接口

      v5.10.0 添加对外请求超时设置

      v6.1.0 添加多客服聊天记录查询

      v6.2.0 优化RequestMessageEvent相关结构；添加消息发送测试工具

      v7.0.10 添加微信支付相关接口、优化二维码接口

      v7.0.14 完善微信支付接口，添加AccessTokenHandlerWapper

      v7.0.20 添加MessageHandlerException，修正部分bug

      v7.1.0 正式发布微信支付、微小店接口；完善模板消息响应事件。

      v8.0.0 分离基础方法到Senparc.Weixin

      v9.3.0 稳定版

      v9.4.2 修改完善了群发的方法
      v9.4.3 支持新增的6种菜单的事件推送

      v9.5.0
      添加消息去重

      v9.5.3
      纠正群发和模板推送 接收MsgID出错问题

      v9.5.7  新增获取Js-Api凭证接口（ticket）以及生成签名的方法

      v9.6.1 添加AccessToken过期获取的Lock、新增数据统计接口

      v9.6.4 获取JsApiTicket方法完善

      v10.0.0 重构代码，加入AppStore

      v11.0.1 框架升级到.NET 4.0

      v11.2.0 添加AppStore相关接口

      v11.2.24 添加针对加密信息的官方iphone换行bug处理

      v11.3.0 分离Open，优化素材相关方法

      v11.3.2 摇一摇周边试用版

      v11.3.6 群发消息接口修改  试用版

      v12.3.1 添加了AccessToken（非预期的）过期自动处理机制，大部分高级接口可以忽略对AccessToken的获取和管理。稳定版。

      v12.4.2 重新整理（简化）API的命名空间

      v13 支持.NET4.5，添加异步请求方法

      v13.2.1 完善异步请求方法，添加JSON生成过程中null对象的过滤机制

      v13.3.0 整合JsAPITicketContainer到AccessTokenContainer

      v13.4 重构升级

      v13.5.2 添加个性化菜单
      v13.5.6
      完善红包发送及查询接口
      修复Wifi API的bug
      完善Web代理（Proxy）功能
      完善微小店实体类型

      v13.6.3
      更新Container架构
      分离AccessTokenContainer和JsApiTicketContainer
      完善接口
      匹配Senparc.Weixin v4.5.12
      v13.6.8
      URL转义
      更新API
      优化Container，全面支持分布式缓存
      添加客服消息接口

      v13.6.10
      提供Container缓存立即生效的解决方案

      v13.7.0-beta1
      优化缓存方案
      添加短链接接口

      v13.7.9
      1、BatchGetUserInfoJson类重命名为BatchGetUserInfoJsonResult
      2、重构部分MessageHandler代码
      3、更新卡券接口
      4、完善消息响应功能
      5、完善摇一摇功能
      6、完善wifi功能
      7、添加用户“标签”相关接口

      v13.8.2
      2016-05-24
      更新及新增接口：
      TemplateApi
      CardApi
      WiFiApi
      ShakeAroundApi
      新增接口模块：
      ScanApi
      v13.8.4 尝试解决OAuth：40029-invalid code 错误

      v14.1.0
      为借口添加异步方法
      完善接口

      v14.2.2
      支持.NET ore
      优化EntityHelper及接口

      v14.2.3
      使用ApiUtility.GetExpireTime()方法处理过期

      v14.3.3
      重构缓存策略
      重构Container
      整合分布锁

      v14.3.4
      添加TryReRegister()方法，处理分布式缓存重启（丢失）的情况

      v14.3.6
      重构缓存键命名空间规则，添加Config.DefaultCacheNamespace

      v14.3.7
      修改Create方法（及对应异步方法），匹配最新的官方文档，删除CreateByStr方法（及对应异步方法）；
      增加QrCode_ActionName枚举

      v14.3.100
      第100个Nuget公开发布的Senparc.Weixin.MP.dll版本。
      添加获取API：获取微信服务器的ip段。

      v14.3.101
      修改TenPayUtil.BuildRandomStr()方法.
      .NET Core版本：修改编码；删除第一版微信支付代码。（TenPayLib）

      v14.3.104
      重构缓存，添加ObjectCacheStrategy

      v14.3.105 优化红包，添加裂变红包
      v14.3.106
      删除Senparc.Weixin.MP.Helpers.FileHelper，合并到Senparc.Weixin.Helpers.FileHelper类中（开发时只需要注意修改命名空间）
      为Senparc.Weixin.Helpers.FileHelper添加DownLoadFileFromUrl()方法
      v14.3.107
      SearchRedPack方法修改证书初始化方法
      RedPackHBInfo去除status属性
      为TenPayLibV3.RequestHandler.ParseXML()方法添加v==null的判断
      v14.3.107
      fix bug：普通红包加入场景值之后的签名问题
      v14.3.105 优化红包，添加裂变红包
      v14.3.106
      删除Senparc.Weixin.MP.Helpers.FileHelper，合并到Senparc.Weixin.Helpers.FileHelper类中（开发时只需要注意修改命名空间）
      为Senparc.Weixin.Helpers.FileHelper添加DownLoadFileFromUrl()方法
      v14.3.107
      SearchRedPack方法修改证书初始化方法
      RedPackHBInfo去除status属性
      为TenPayLibV3.RequestHandler.ParseXML()方法添加v==null的判断
      v14.3.107
      fix bug：普通红包加入场景值之后的签名问题
      v14.3.113
      修正了WiFiApi中GetQrcode函数的返回值数据类型。
      修正了ShakeAroundApi中申请iBeacon设备的申请批次ID(appId)的数据类型从int改为long。
      修正了ShakeAroundApi中查询iBeacon设备传递的参数(begin =&gt; last_seen)，跟随微信更新。
      修正了WiFiApi中GetQrcodeResult的bug。
      v14.3.114 优化微信支付方法
      v14.3.115 CommonApi.GetMenu()方法，当发生菜单不存在等错误的时候会抛出WeixinMenuException异常。
      v14.3.116 TryCommonApi抛出ErrorJsonResultException、WeixinException异常时加入了accessTokenOrAppId参数
      v14.3.117 添加SuccessResponseMessage类型响应信息
      v14.3.119
      OnEvent_ShakearoundUserShake接口默认返回ResponseMessageNoResponse类型消息
      修改BatchGetUserInfoData.lang属性为int类型
      v14.3.122
      优化微信支付
      TenPayV3UnifiedorderRequestData类调整sign_type设置顺序
      （准备做，需要测试：TenPayV3RefundQueryRequestData类暂时注释掉signType传入）
      14.3.123
      废除SHA1UtilHelper及MD5UtilHelper，方法合并到Senparc.Weixin.Helpers.EncryptHelper下（Senparc.Weixin.dll中）
      v14.3.124 修改lang属性为string类型，并添加LangEnum作为枚举
      v14.3.125 重新调整sign_type设置顺序，v14.3.122版本中不应该做调整
      v14.3.126 更新微信支付接口
      v14.3.127 ：
      fix bug：微信支付统一订单接口。将 totalFee 参数类型由 decimal 改为 int。
      v14.3.128：
      完善PoiApi.GetPoiList()方法返回参数中的GetStoreList_BaseInfo信息
      v14.3.129 ：
      设置TransactionId和OutTradeNo时判断是否为null，如果是则提供空字符串""
      修改订单查询接口的参数顺序，sign_type参数有的话必须参与签名，也就是放在md5之前，否则微信服务器会返回签名错误
      v14.3.131 ：1·为MediaApi.Get()方法提供ApiHandlerWapper.TryCommonApi()方法支持，可以传入AppId
      v14.3.132：添加Get.DownloadAsync(string url, string dir)方法
      v14.3.132：完善UnifiedorderResult 服务商统一订单接口
      v14.3.133：修复CommonApi.CreateMenuConditional()方法调用出现“invalid button size”错误的问题
      v14.3.136：增加KeywordAutoReplyInfo_Item.reply_list_info属性
      v14.3.137：修改JSSDKHelper.GetAddrSign传入参数，应该传入OAuth的AccessToken
      v14.3.138：修改 JSSDKHelper.GetAddrSign() 方法
      v14.3.139：自定义菜单、模板消息全面支持小程序最新接口！
      v14.3.140
      1、添加BaseGroupMessageDataByGroupId.send_ignore_reprint属性
      2、优化代码
      v14.3.141 修改amount为decimal类型
      v14.3.142 RequestUtility中的所有请求证书由X509Certificate类型改为X509Certificate2
      SendResult文件添加了msg_data_id字段，此字段用于统计分析
      v14.3.143 修复上一版本造成的菜单获取错误问题
      
      v14.4.5 完善微信支付退款申请接口
      v14.4.6 修复企业付款接口无法指定证书的问题（TenpayV3.Transfers）
    </PackageReleaseNotes>
    <RepositoryUrl>https://github.com/JeffreySu/WeiXinMPSDK</RepositoryUrl>
  </PropertyGroup>

  <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
    <OutputPath>..\..\Senparc.Weixin.MP.BuildOutPut</OutputPath>
    <DefineConstants>$(DefineConstants);RELEASE</DefineConstants>
  </PropertyGroup>


  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Release|x86'">
    <OutputPath>..\..\Senparc.Weixin.MP.BuildOutPut</OutputPath>
    <DefineConstants>$(DefineConstants);RELEASE</DefineConstants>
    <DocumentationFile>..\..\Senparc.Weixin.MP.BuildOutPut\Senparc.Weixin.MP.xml</DocumentationFile>
    <Optimize>true</Optimize>
    <DebugType>pdbonly</DebugType>
    <ErrorReport>prompt</ErrorReport>
    <CodeAnalysisRuleSet>MinimumRecommendedRules.ruleset</CodeAnalysisRuleSet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(TargetFramework)|$(Platform)'=='Release|netstandard1.6|AnyCPU'">
    <OutputPath>..\..\Senparc.Weixin.MP.BuildOutPut\</OutputPath>
    <DocumentationFile>..\..\Senparc.Weixin.MP.BuildOutPut\netstandard1.6\Senparc.Weixin.MP.xml</DocumentationFile>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(TargetFramework)|$(Platform)'=='Release|net461|AnyCPU'">
    <OutputPath>..\..\Senparc.Weixin.MP.BuildOutPut\</OutputPath>
    <DocumentationFile>..\..\Senparc.Weixin.MP.BuildOutPut\net461\Senparc.Weixin.MP.xml</DocumentationFile>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(TargetFramework)|$(Platform)'=='Release|net45|AnyCPU'">
    <OutputPath>..\..\Senparc.Weixin.MP.BuildOutPut\</OutputPath>
    <DocumentationFile>..\..\Senparc.Weixin.MP.BuildOutPut\net45\Senparc.Weixin.MP.xml</DocumentationFile>
  </PropertyGroup>

  <ItemGroup>
    <Compile Remove="AdvancedAPIs\Card\Store\**" />
    <EmbeddedResource Remove="AdvancedAPIs\Card\Store\**" />
    <None Remove="AdvancedAPIs\Card\Store\**" />
  </ItemGroup>

  <ItemGroup>
    <Compile Remove="Properties\AssemblyInfo.cs" />
  </ItemGroup>


  <ItemGroup Condition=" '$(TargetFramework)' == 'netstandard1.6' ">
    <PackageReference Include="System.Xml.XmlDocument" Version="4.3.0" />
    <PackageReference Include="System.Xml.XPath.XmlDocument" Version="4.3.0" />
    <PackageReference Include="Microsoft.AspNetCore.Http" Version="1.1.1" />
  </ItemGroup>

  <ItemGroup Condition=" '$(TargetFramework)' == 'net461' ">
    <Reference Include="System" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Web" />
    <Reference Include="System.Net.Http" />
  </ItemGroup>

  <ItemGroup Condition=" '$(TargetFramework)' == 'net45' ">
    <Reference Include="System.Core" />
    <Reference Include="System.Data" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Web" />
    <Reference Include="System.Web.Extensions" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\Senparc.Weixin\Senparc.Weixin\Senparc.Weixin.csproj" />
  </ItemGroup>

  <!--<ItemGroup>
    <Folder Include="Properties\" />
  </ItemGroup>-->
</Project>